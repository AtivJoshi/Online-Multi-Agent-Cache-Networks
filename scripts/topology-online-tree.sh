eval "$(conda shell.bash hook)"
conda activate acm_sigmetrics

#python main.py  --output res/topology-geant/ --graph_type   grid_2d --graph_size 8 --query_nodes 2 --repo_nodes 1 --min_capacity 1 --max_capacity 5 --record_offline_stats_only

B=100
T=5000
python tracegenerator.py --batch_min_size $B --batch_max_size $B --time_horizon ${T}
python tracegenerator.py --batch_min_size $B --batch_max_size $B --time_horizon ${T} --zipfs_exponent 0.8
python tracegenerator.py --batch_min_size $B --batch_max_size $B --time_horizon ${T} --zipfs_exponent 0.6
alpha=3.0
python main.py --time_horizon ${T} --umin_umax 0.1-1.0 --alpha $alpha --traces traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_1.2_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.8_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.6_roll_0.pk --cache_type fair --output res/2players-topology-tree --graph_type balanced_tree --graph_size 8 --query_nodes 4 --min_capacity 1 --max_capacity 5 --record_offline_stats_only --players 3 --custom_weights 9.237721826711306-6.025995038712244-9.223277007331232-3.7925575799529074-2.3610020660719675-1.6219179992471262-4.828852288827125-2.346378180450507-1.3709833735205916-1.386865507333856-4.389977465389839-3.4149041254675643
python main.py --time_horizon ${T} --traces traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_1.2_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.8_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.6_roll_0.pk --cache_type lru --output res/2players-topology-tree --graph_type geant --construct_utility_point_cloud --construct_pareto_front --cached_offline_results --experiment_subname lru --graph_type balanced_tree --graph_size 8 --query_nodes 4 --min_capacity 1 --max_capacity 5 --players 3 --custom_weights 9.237721826711306-6.025995038712244-9.223277007331232-3.7925575799529074-2.3610020660719675-1.6219179992471262-4.828852288827125-2.346378180450507-1.3709833735205916-1.386865507333856-4.389977465389839-3.4149041254675643 &
python main.py --time_horizon ${T} --traces traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_1.2_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.8_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.6_roll_0.pk --cache_type lfu --output res/2players-topology-tree --graph_type geant --construct_utility_point_cloud --construct_pareto_front --cached_offline_results --experiment_subname lfu --graph_type balanced_tree --graph_size 8 --query_nodes 4 --min_capacity 1 --max_capacity 5 --players 3 --custom_weights 9.237721826711306-6.025995038712244-9.223277007331232-3.7925575799529074-2.3610020660719675-1.6219179992471262-4.828852288827125-2.346378180450507-1.3709833735205916-1.386865507333856-4.389977465389839-3.4149041254675643 &
for param in 1.0 3.0; do
  python main.py --time_horizon ${T} --umin_umax 0.1-1.0 --alpha ${param} --traces traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_1.2_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.8_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.6_roll_0.pk --cache_type fair --output res/2players-topology-tree --graph_type balanced_tree --graph_size 8 --query_nodes 4 --min_capacity 1 --max_capacity 5 --cached_offline_results --experiment_subname fair_${param} --players 3 --custom_weights 9.237721826711306-6.025995038712244-9.223277007331232-3.7925575799529074-2.3610020660719675-1.6219179992471262-4.828852288827125-2.346378180450507-1.3709833735205916-1.386865507333856-4.389977465389839-3.4149041254675643 &
  python main.py --time_horizon ${T} --umin_umax 0.1-1.0 --alpha ${param} --traces traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_1.2_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.8_roll_0.pk-traces/trace_catalog_20_T_${T}_B_${B}_${B}_s_0.6_roll_0.pk --cache_type fairslotted --output res/2players-topology-tree --graph_type balanced_tree --graph_size 8 --query_nodes 4 --min_capacity 1 --max_capacity 5 --cached_offline_results --experiment_subname fairslotted_${param} --players 3 --custom_weights 9.237721826711306-6.025995038712244-9.223277007331232-3.7925575799529074-2.3610020660719675-1.6219179992471262-4.828852288827125-2.346378180450507-1.3709833735205916-1.386865507333856-4.389977465389839-3.4149041254675643 &
done
